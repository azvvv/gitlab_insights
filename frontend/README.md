# GitLab Insight - å‰ç«¯åº”ç”¨

åŸºäºŽ Vue 3 + Element Plus çš„ GitLab Insight ç®¡ç†å¹³å°å‰ç«¯åº”ç”¨ã€‚

## æŠ€æœ¯æ ˆ

- **æ¡†æž¶**: Vue 3 (Composition API)
- **æž„å»ºå·¥å…·**: Vite 5
- **UI ç»„ä»¶åº“**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4
- **HTTP å®¢æˆ·ç«¯**: Axios
- **å›¾è¡¨**: ECharts
- **æ—¥æœŸå¤„ç†**: Day.js
- **æ ·å¼**: SCSS

## åŠŸèƒ½ç‰¹æ€§

### ðŸ” è®¤è¯ç³»ç»Ÿ
- æ”¯æŒæœ¬åœ°è´¦æˆ·ç™»å½•
- æ”¯æŒ LDAP è®¤è¯
- è‡ªåŠ¨é€‰æ‹©è®¤è¯æ–¹å¼
- Token ç®¡ç†å’Œè‡ªåŠ¨åˆ·æ–°
- ä¿®æ”¹å¯†ç åŠŸèƒ½

### ðŸ“Š ä»ªè¡¨ç›˜
- ç³»ç»Ÿç»Ÿè®¡æ•°æ®å±•ç¤º
- æœ€è¿‘ä»»åŠ¡åˆ—è¡¨
- å¿«é€Ÿæ“ä½œå…¥å£

### ðŸ—‚ï¸ GitLab ç®¡ç†
- **ä»“åº“ç®¡ç†**: æŸ¥çœ‹ã€æœç´¢ã€åŒæ­¥ GitLab ä»“åº“
- **åˆ†ç»„ç®¡ç†**: ç®¡ç† GitLab åˆ†ç»„
- **åˆ†æ”¯ç®¡ç†**: æŸ¥çœ‹å’Œç®¡ç†ä»“åº“åˆ†æ”¯
- **åˆ†æ”¯è§„åˆ™**: åˆ›å»ºã€ç¼–è¾‘ã€åº”ç”¨åˆ†æ”¯æ¸…ç†è§„åˆ™
- **æƒé™ç®¡ç†**: æŸ¥çœ‹ä»“åº“æƒé™è®¾ç½®

### ðŸ“ é¡¹ç›®ç®¡ç†
- é¡¹ç›®åˆ—è¡¨æŸ¥çœ‹
- æŒ‰åˆ¶é€ å•†ç­›é€‰
- é¡¹ç›®è¯¦æƒ…æŸ¥çœ‹

### ðŸ“ æ—¥å¿—ç®¡ç†
- æ—¥å¿—è§£æž
- å¯¼å…¥åŽ†å²è®°å½•
- ç»Ÿè®¡æ•°æ®å±•ç¤º

### âš™ï¸ ä»»åŠ¡ç®¡ç†
- ä»»åŠ¡åˆ—è¡¨æŸ¥çœ‹
- ä»»åŠ¡çŠ¶æ€ç›‘æŽ§
- ä»»åŠ¡è¯¦æƒ…æŸ¥çœ‹
- ä»»åŠ¡å–æ¶ˆåŠŸèƒ½

### ðŸ› ï¸ ç³»ç»Ÿè®¾ç½®
- ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹
- LDAP é…ç½®ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰
- å¥åº·æ£€æŸ¥
- æ•°æ®åº“åˆå§‹åŒ–

## å¿«é€Ÿå¼€å§‹

### çŽ¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm >= 8.0.0 æˆ– pnpm >= 8.0.0ï¼ˆæŽ¨èï¼‰

### å®‰è£…ä¾èµ–

ä½¿ç”¨ npm:
```bash
cd frontend
npm install
```

æˆ–ä½¿ç”¨ pnpmï¼ˆæŽ¨èï¼Œæ›´å¿«æ›´çœç©ºé—´ï¼‰:
```bash
cd frontend
pnpm install
```

### å¼€å‘æ¨¡å¼

å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£ 3000ï¼‰ï¼š

ä½¿ç”¨ npm:
```bash
npm run dev
```

ä½¿ç”¨ pnpm:
```bash
pnpm dev
```

è®¿é—® http://localhost:3000

### ç”Ÿäº§æž„å»º

æž„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼š

ä½¿ç”¨ npm:
```bash
npm run build
```

ä½¿ç”¨ pnpm:
```bash
pnpm build
```

æž„å»ºäº§ç‰©å°†è¾“å‡ºåˆ° `dist` ç›®å½•ã€‚

### é¢„è§ˆæž„å»º

é¢„è§ˆç”Ÿäº§æž„å»ºï¼š

ä½¿ç”¨ npm:
```bash
npm run preview
```

ä½¿ç”¨ pnpm:
```bash
pnpm preview
```

## é¡¹ç›®ç»“æž„

```
frontend/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/               # API æŽ¥å£å°è£…
â”‚   â”‚   â”œâ”€â”€ request.js     # Axios å°è£…
â”‚   â”‚   â”œâ”€â”€ auth.js        # è®¤è¯ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ gitlab.js      # GitLab ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ branch.js      # åˆ†æ”¯ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ task.js        # ä»»åŠ¡ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ system.js      # ç³»ç»Ÿç›¸å…³ API
â”‚   â”‚   â””â”€â”€ index.js       # API ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ layouts/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ MainLayout.vue # ä¸»å¸ƒå±€
â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.js       # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ stores/            # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ user.js        # ç”¨æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ styles/            # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ main.scss      # ä¸»æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ common.js      # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Login.vue      # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ Dashboard.vue  # ä»ªè¡¨ç›˜
â”‚   â”‚   â”œâ”€â”€ Settings.vue   # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚   â”œâ”€â”€ gitlab/        # GitLab ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Repositories.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Groups.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Branches.vue
â”‚   â”‚   â”‚   â””â”€â”€ BranchRules.vue
â”‚   â”‚   â”œâ”€â”€ logs/          # æ—¥å¿—ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ LogList.vue
â”‚   â”‚   â””â”€â”€ tasks/         # ä»»åŠ¡ç®¡ç†é¡µé¢
â”‚   â”‚       â””â”€â”€ TaskList.vue
â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js            # åº”ç”¨å…¥å£
â”œâ”€â”€ index.html             # HTML æ¨¡æ¿
â”œâ”€â”€ vite.config.js         # Vite é…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## API é…ç½®

å‰ç«¯é»˜è®¤é€šè¿‡ä»£ç†è®¿é—®åŽç«¯ APIï¼š

```javascript
// vite.config.js
server: {
  port: 3000,
  proxy: {
    '/api': {
      target: 'http://localhost:5000',  // åŽç«¯æœåŠ¡åœ°å€
      changeOrigin: true,
    },
  },
}
```

å¦‚éœ€ä¿®æ”¹åŽç«¯åœ°å€ï¼Œè¯·ç¼–è¾‘ `vite.config.js` ä¸­çš„ `proxy.target` é…ç½®ã€‚

## è®¤è¯è¯´æ˜Ž

### ç™»å½•æµç¨‹

1. ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
2. å‰ç«¯è°ƒç”¨ `/api/auth/auto-login` æŽ¥å£ï¼ˆè‡ªåŠ¨å°è¯•æœ¬åœ°å’Œ LDAP è®¤è¯ï¼‰
3. åŽç«¯è¿”å›ž JWT Token å’Œç”¨æˆ·ä¿¡æ¯
4. å‰ç«¯å­˜å‚¨ Token åˆ° localStorage
5. åŽç»­è¯·æ±‚è‡ªåŠ¨åœ¨ Header ä¸­æºå¸¦ Token

### Token ç®¡ç†

- Token å­˜å‚¨åœ¨ `localStorage.token`
- æ¯æ¬¡è¯·æ±‚è‡ªåŠ¨æºå¸¦ `Authorization: Bearer {token}`
- Token è¿‡æœŸåŽè‡ªåŠ¨è·³è½¬ç™»å½•é¡µ

## è·¯ç”±æƒé™

è·¯ç”±åˆ†ä¸ºä¸¤ç±»ï¼š

- **å…¬å¼€è·¯ç”±**: ä¸éœ€è¦ç™»å½•å³å¯è®¿é—®ï¼ˆå¦‚ç™»å½•é¡µï¼‰
- **å—ä¿æŠ¤è·¯ç”±**: éœ€è¦ç™»å½•åŽæ‰èƒ½è®¿é—®

è·¯ç”±å®ˆå«ä¼šè‡ªåŠ¨æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œæœªç™»å½•ç”¨æˆ·ä¼šè¢«é‡å®šå‘åˆ°ç™»å½•é¡µã€‚

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/views/` ä¸‹åˆ›å»ºé¡µé¢ç»„ä»¶
2. åœ¨ `src/router/index.js` ä¸­æ·»åŠ è·¯ç”±é…ç½®
3. åœ¨ä¸»å¸ƒå±€çš„èœå•ä¸­æ·»åŠ èœå•é¡¹

### æ·»åŠ æ–° API

1. åœ¨ `src/api/` ä¸‹åˆ›å»ºå¯¹åº”çš„ API æ¨¡å—
2. ä½¿ç”¨å°è£…çš„ `request` å®žä¾‹å‘èµ·è¯·æ±‚
3. åœ¨ `src/api/index.js` ä¸­å¯¼å‡ºæ–°æ¨¡å—

### çŠ¶æ€ç®¡ç†

ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œå‚è€ƒ `src/stores/user.js` åˆ›å»ºæ–°çš„ storeã€‚

## å¸¸è§é—®é¢˜

### è·¨åŸŸé—®é¢˜

å¼€å‘çŽ¯å¢ƒå·²é…ç½®ä»£ç†ï¼Œæ— éœ€æ‹…å¿ƒè·¨åŸŸã€‚ç”Ÿäº§çŽ¯å¢ƒéœ€è¦åŽç«¯é…ç½® CORS æˆ–ä½¿ç”¨ Nginx åå‘ä»£ç†ã€‚

### Token è¿‡æœŸ

Token è¿‡æœŸåŽä¼šè‡ªåŠ¨è·³è½¬ç™»å½•é¡µï¼Œé‡æ–°ç™»å½•å³å¯ã€‚

### æž„å»ºé”™è¯¯

ç¡®ä¿ Node.js ç‰ˆæœ¬ >= 16ï¼Œä¾èµ–å®‰è£…å®Œæ•´ã€‚

## æµè§ˆå™¨æ”¯æŒ

- Chrome >= 90
- Firefox >= 88
- Safari >= 14
- Edge >= 90

## License

MIT
